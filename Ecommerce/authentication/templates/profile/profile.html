{% extends 'base.html' %}
{% load static %}
{% block title %}
{{user.user_profile.full_name}}'s profile'
{% endblock %}

{% block content %}

<div class="container my-5">
  <div class="row justify-content-center">
    <div class="col-md-7">
      <div class="card shadow-lg border-0 rounded-4">
        <div class="card-header bg-gradient text-white text-center rounded-top-4" 
             style="background: linear-gradient(135deg, #007bff, #0056b3);">
          <h3 class="mb-0">{{ profile.full_name }}'s Profile</h3>
        </div>
        <div class="card-body p-4">
          <form method="POST" enctype="multipart/form-data" class="needs-validation" novalidate>
            {% csrf_token %}
            
            <!-- Profile Photo -->
            <div class="text-center mb-4">
              <div class="position-relative d-inline-block">
                {% if profile.profile_photo %}
                  <img src="{{ profile.profile_photo.url }}" 
                       alt="Profile Photo" 
                       class="rounded-circle shadow border border-3 border-primary"
                       style="width: 130px; height: 130px; object-fit: cover;">
                {% else %}
                  <img src="https://via.placeholder.com/130" 
                       alt="No Profile Photo" 
                       class="rounded-circle shadow border border-3 border-secondary">
                {% endif %}
                <label class="btn btn-sm btn-light rounded-circle shadow position-absolute bottom-0 end-0" 
                       style="cursor: pointer;">
                  <i class="bi bi-camera-fill"></i>
                  <input type="file" name="profile_photo" hidden>
                </label>
              </div>
            </div>

            <!-- First & Last Name -->
            <div class="row">
              <div class="col-md-6 mb-3">
                <label class="form-label fw-bold">First Name</label>
                <input type="text" name="first_name" 
                       value="{{ profile.first_name }}" 
                       class="form-control rounded-3 shadow-sm" required>
              </div>
              <div class="col-md-6 mb-3">
                <label class="form-label fw-bold">Last Name</label>
                <input type="text" name="last_name" 
                       value="{{ profile.last_name }}" 
                       class="form-control rounded-3 shadow-sm" required>
              </div>
            </div>

            <!-- Email -->
            <div class="mb-3">
              <label class="form-label fw-bold">Email</label>
              <input type="email" name="email" 
                     value="{{ profile.email }}" 
                     class="form-control rounded-3 shadow-sm" required>
            </div>

            <!-- Phone -->
            <div class="mb-3">
              <label class="form-label fw-bold">Phone Number</label>
              <input type="text" name="phone_number" 
                     value="{{ profile.phone_number }}" 
                     class="form-control rounded-3 shadow-sm">
            </div>

            <!-- Address -->
            <div class="mb-3">
              <label class="form-label fw-bold">Address</label>
              <textarea name="address" 
                        class="form-control rounded-3 shadow-sm" 
                        rows="3">{{ profile.address }}</textarea>
            </div>

            <!-- Buttons -->
            <div class="d-flex justify-content-between">
              <a href="" class="btn btn-outline-secondary rounded-3 px-4">
                <i class="bi bi-arrow-left"></i> Cancel
              </a>
              <button type="submit" class="btn btn-primary rounded-3 shadow px-4">
                <i class="bi bi-check-circle-fill"></i> Save Changes
              </button>
            </div>

          </form>
        </div>
      </div>
    </div>
  </div>
</div>

{% endblock %}
